<head>
  <title>meteor-multiple-authentication-services</title>
</head>

<body>
  <div class="container">
    <h1>meteor-multiple-authentication-services</h1>

    <p>
      Application to resolve issue with multiple accounts being created for the 
      same user (same email address) when using external authenticaton services (Google, Facebook, etc.)
    </p>

    {{> loginButtons}}

    <hr>

    <p>Total users: {{userCount}}</p>

    {{> users}}
  </div>
</body>

<template name="users">

  <table class="table table-striped">
    <thead>
      <tr>
        <th></th>
        <th class="col-md-2">id</th>
        <th class="col-md-2">email</th>
        <th class="col-md-2">services</th>
        <th class="col-md-2">app-profile</th>
        <th class="col-md-4"></th>
      </tr>
    </thead>

    <tbody>
      {{#each users}}
      <tr class='{{activeIfIsUser}}'>
        <td>
          {{#if isUser}}
            <i class="fa fa-arrow-right fa-3"></i>
          {{/if}}
        </td>
        <td>{{_id}}</td>
        <td>
          {{#each emails}}
            <p>{{address}}</p>
          {{/each}}        
        </td>
        <td>
          {{#each services}}
            <p><i class="fa fa-{{key}}"></i> &nbsp;&nbsp; {{key}}</p>
          {{/each}}        
        </td>

        <!-- App Profile -->
        <td>
          <img class='profile' src='{{appProfile.picture}}'>
        </td>
        <td>
          <p>{{appProfile.name}}</p>
          <p>{{appProfile.email}}</p>
          <p>{{appProfile.firstName}}</p>
          <p>{{appProfile.lastName}}</p>
          <p>{{appProfile.locale}}</p>                  
        </td>

      </tr>
      {{/each}}
    </tbody>
  </table>
  
</template>

